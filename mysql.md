## MySQL 中常见的存储引擎

1. InnoDB

- 事务支持：支持事务，符合 ACID 特性（原子性、一致性、隔离性、持久性）。
- 行级锁：支持行级锁（比表级锁更精细）。
- 外键支持：支持外键约束，保证 referential integrity（引用完整性）。
- 数据恢复：具有崩溃恢复能力，使用 redo log 和 undo log 来保证事务的一致性。
- 使用场景：适合高并发、事务性操作的应用，如电商系统、金融系统等。

2. MyISAM

- 非事务型：不支持事务。
- 表级锁：支持表级锁，当多个查询同时访问同一表时会发生锁竞争。
- 性能优势：对于只读或较少更新的应用，MyISAM 性能较好。
- 全文索引支持：MyISAM 支持全文索引，适合做全文搜索的场景。
- 使用场景：适用于以读取为主的应用，不要求事务处理的系统。

3. MEMORY（HEAP）

- 存储在内存中：数据存储在内存中，查询速度非常快，但数据会在 MySQL 重启时丢失。
- 表级锁：使用表级锁。
- 适合临时数据：适用于需要快速访问的数据，且对数据持久性没有要求的应用。
- 限制：数据存储在内存中，表数据受限于内存大小。

4. CSV

- 文本格式存储：将数据存储为 CSV（逗号分隔值）格式文件，每行数据代表表中的一行。
- 不支持索引：不支持索引和外键。
- 适合导入导出：主要用于数据导入导出，但不适合高性能生产环境。

5. ARCHIVE

- 压缩存储：将数据以压缩格式存储，适合归档存储。
- 只支持 INSERT 和 SELECT：只支持 INSERT 和 SELECT 操作，不支持 UPDATE 或 DELETE。
- 使用场景：适用于存储大量历史数据，不需要频繁更新的场景，如日志存储。

6. NDB (Cluster)

- 分布式数据库：支持分布式数据存储，支持高可用性和自动故障转移。
- 支持事务：支持 ACID 特性，能够进行事务性操作。
- 高可扩展性：支持在多台机器上横向扩展，适合大型分布式应用。
- 使用场景：适合需要高可用性和高扩展性的场景，如电信行业、分布式应用等。

7. BLACKHOLE

- 数据丢弃：所有插入的数据都会被丢弃，但查询操作会返回一个空结果集。
- 使用场景：用于测试、数据同步（主从复制中的主库使用）等场景。

8. Federated

- 表链接：允许 MySQL 数据库之间进行表级链接，支持跨多个 MySQL 实例访问数据。
- 不存储数据：只包含一个指向远程表的引用，数据实际存储在远程 MySQL 实例中。
- 适用场景：适用于需要跨 MySQL 实例访问数据的场景。

9. TokuDB

- 压缩存储：使用 fractal tree 索引，能够对大规模数据进行高效的压缩和访问。
- 事务支持：支持 ACID 事务。
- 适用场景：适用于大规模数据存储，特别是需要高效压缩存储和高效写入的应用。

10. InnoDB Cluster (用于 MySQL Cluster)

- 高可用集群：用于构建高可用、高扩展的 MySQL 集群。
- 支持自动故障转移：当集群中的某个节点发生故障时，自动进行故障转移，确保高可用性。
- 适用场景：适用于对高可用性、容错性和扩展性有高要求的应用。

11. Spider

- 分布式分片存储：通过表分片将数据分布在不同的节点上，支持跨多个节点分布式查询。
- 适用场景：适用于大数据量的分布式系统，尤其是需要水平扩展的场景。

**总结：**

- InnoDB 是最常用的存储引擎，支持事务、行级锁和外键，是高并发、高可靠性的推荐引擎。
- MyISAM 用于性能优先、只读或少量写的场景，不支持事务。
- MEMORY 存储在内存中，适合缓存和临时数据。
- ARCHIVE 适合存储历史归档数据，不支持修改。
- NDB 和 Federated 用于分布式场景，支持跨多个 MySQL 实例工作。

## innodb 有哪几种日志

1、重做日志（Redo Log）：重做日志用于保证 事务的持久性（Durability）。如果数据库在事务提交后崩溃，重做日志会帮助恢复操作。重做日志对于恢复事务的 原子性（Atomicity） 也至关重要。  
2、回滚日志（Undo Log）：回滚日志用于事务的 原子性（Atomicity） 和 隔离性（Isolation），允许在事务未提交时回滚事务，并确保数据库处于一致的状态。  
3、二进制日志（Binary Log）：二进制日志可以用来恢复 MySQL 服务器崩溃后的数据。通过回放二进制日志中的事件，可以恢复到崩溃前的状态。在主从复制中，二进制日志用于将主服务器的变化传递到从服务器。二进制日志记录了所有对数据库表进行修改的操作（包括 INSERT、UPDATE、DELETE 等），但不记录查询操作。它只记录执行的 SQL 语句或修改事件。  
4、错误日志（Error Log）：错误日志记录 MySQL 启动、运行和停止过程中发生的任何错误信息。它是数据库管理员用来诊断和修复问题的重要工具。  
5、查询日志（General Query Log）：查询日志记录 MySQL 服务器接收到的所有 SQL 查询，包括 SELECT、INSERT、UPDATE 等操作。  
6、慢查询日志（Slow Query Log）：慢查询日志用于记录执行时间较长的查询。它可以帮助数据库管理员识别性能瓶颈并优化查询。  
7、复制日志（Replication Log）：复制日志是 MySQL 的主从复制机制中使用的日志，用于将主数据库上的变更同步到从数据库。
